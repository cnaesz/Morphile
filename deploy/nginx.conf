# Sample Nginx configuration for serving files from the bot.
# This should be included in your main Nginx configuration
# (e.g., in /etc/nginx/sites-available/your-domain.conf).

server {
    listen 80;
    server_name your-domain.com; # Replace with your actual domain or IP

    # Route for serving the processed files
    location /files/ {
        # The alias should point to the *absolute path* of your public files directory.
        # Replace /path/to/your/project/public_files with the real path on your server.
        alias /path/to/your/project/public_files/;

        # Enable directory listing (optional, good for debugging)
        autoindex on;

        # Caching headers to reduce server load
        expires 1d;
        add_header Cache-Control "public, must-revalidate, proxy-revalidate";

        # Security: prevent execution of any scripts in the upload folder
        location ~* \.(php|pl|py|sh)$ {
            deny all;
        }
    }

    # It's highly recommended to set up SSL with Let's Encrypt for production.
    # After setting up Certbot, your configuration would look something like this:
    #
    # listen 443 ssl;
    # ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
    # ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;
    # include /etc/letsencrypt/options-ssl-nginx.conf;
    # ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
}
